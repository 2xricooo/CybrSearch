<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cybr Searches</title>
  <link rel="icon" type="image/png" href="favicon.png" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    body{margin:0;font-family:Inter,system-ui;background:#0b0f14;color:#e6eefc}
    .sidebar{position:fixed;top:0;left:0;width:220px;height:100%;background:#121824;padding:20px;box-sizing:border-box}
    .sidebar h2{margin-bottom:20px}
    .sidebar a{display:block;padding:10px;color:#e6eefc;text-decoration:none;border-radius:8px}
    .sidebar a:hover{background:#1c2534}
    .content{margin-left:240px;padding:20px}
    .panel{background:#121824;border:1px solid #1c2534;border-radius:12px;padding:16px;margin-bottom:20px}
    .btn{padding:8px 14px;border-radius:8px;border:none;cursor:pointer}
    .btn.primary{background:#4f7cff;color:#fff}
    .log-item{padding:6px;border-bottom:1px solid #1c2534;font-size:0.9em}
    .modal{display:none;position:fixed;inset:0;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:1000}
    .modal.active{display:flex}
    .modal-content{background:#fff;color:#333;border-radius:12px;padding:20px;max-width:600px;width:90%;max-height:80vh;overflow-y:auto}
    .modal-content h2{margin-top:0}
    .close{cursor:pointer;font-size:20px;float:right}
  </style>
</head>
<body>
  <!-- Sidebar Navigation -->
  <div class="sidebar">
    <h2>Cybr Searches</h2>
    <a href="#" onclick="setTool('email')">üìß Email</a>
    <a href="#" onclick="setTool('person')">üë§ Person</a>
    <a href="#" onclick="setTool('phone')">üì± Phone</a>
    <a href="#" onclick="setTool('domain')">üåê Domain</a>
    <a href="#" onclick="setTool('ip')">üíª IP</a>
    <a href="#" onclick="openLegalModal()">üìú Privacy & Legal</a>
  </div>

  <!-- Main Content -->
  <div class="content">
    <!-- Auth Gate -->
    <div id="authGate" class="panel">
      <h3>Login or Sign Up</h3>
      <input id="authEmail" type="email" placeholder="Email" style="width:100%;margin-bottom:8px"/>
      <input id="authPass" type="password" placeholder="Password" style="width:100%;margin-bottom:12px"/>
      <div style="display:flex;gap:10px">
        <button class="btn primary" onclick="login()">Login</button>
        <button class="btn" onclick="signup()">Sign Up</button>
      </div>
    </div>

    <!-- App -->
    <div id="app" style="display:none">
      <div class="panel">
        <h3 id="toolTitle">Search</h3>
        <input id="query" type="text" placeholder="Enter query..." style="width:100%;margin-bottom:12px"/>
        <button class="btn primary" onclick="analyze()">Analyze</button>
      </div>
      <div id="results" class="panel"><h3>Results</h3><div id="resultsBox"></div></div>
      <div class="panel">
        <h3>Logs</h3>
        <div id="logs"></div>
        <div style="margin-top:10px;display:flex;gap:10px;flex-wrap:wrap">
          <button class="btn" onclick="exportJSON()">Download JSON</button>
          <button class="btn" onclick="exportCSV()">Download CSV</button>
          <button class="btn" onclick="clearLogs()">Clear Logs</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Privacy & Legal Modal -->
  <div id="legalModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeLegalModal()">&times;</span>
      <h2>üìú Privacy & Legal</h2>
      <p><strong>Introduction:</strong> Cybr Searches is a tool that OSINT-style search workflows. Transparency and trust are important.</p>
      <p><strong>What We Log:</strong> Actions such as login, sign up, session start, and searches are logged locally in your browser.</p>
      <p><strong>Use of Data:</strong> Logs are for demo and debugging purposes only, and not shared externally by default.</p>
      <p><strong>Data Removal:</strong> You can clear logs anytime with the ‚ÄúClear Logs‚Äù button, and remove account data by clearing local storage.</p>
      <p><strong>User Rights:</strong> You control your local data: export, clear, or reset the app. No hidden tracking.</p>
      <p><strong>Disclaimer:</strong> This is an educational a production OSINT system.</p>
    </div>
  </div>

<script>
const state={tool:'email',logs:[],users:JSON.parse(localStorage.getItem('users')||'{}')};

function renderLogs(){
  const box=document.getElementById('logs');
  box.innerHTML='';
  state.logs.forEach(l=>{
    const d=document.createElement('div');
    d.className='log-item';
    d.textContent=`[${l.time}] ${l.msg}`;
    box.prepend(d);
  });
}
function logActivity(msg){
  const entry={time:new Date().toLocaleTimeString(),msg};
  state.logs.push(entry);
  renderLogs();
}

function setTool(tool){state.tool=tool;document.getElementById('toolTitle').textContent=tool.charAt(0).toUpperCase()+tool.slice(1)+' Search';}

function fakeResult(tool,q){
  if(tool==='ip') return `ASN: 13335 ‚Ä¢ ISP: Cloudflare ‚Ä¢ Location: San Francisco, US ‚Ä¢ Risk: low ‚Ä¢ rDNS: host-${q.replace(/\./g,'-')}.example.net`;
  if(tool==='email') return `Found breach matches for ${q}`;
  if(tool==='phone') return `Carrier: DemoTel ‚Ä¢ Line type: mobile`;
  if(tool==='domain') return `WHOIS protected ‚Ä¢ Hosting: DemoHost`;
  if(tool==='person') return `Profile matches for ${q}`;
  return 'No data';
}

function analyze(){
  const q=document.getElementById('query').value.trim();
  if(!q) return;
  const res=fakeResult(state.tool,q);
  document.getElementById('resultsBox').innerHTML=`<div class='log-item'>${res}</div>`;
  logActivity(`${state.tool} searched: ${q}`);
}

function signup(){
  const email=document.getElementById('authEmail').value;
  const pass=document.getElementById('authPass').value;
  if(state.users[email]){alert('User exists');return;}
  state.users[email]=pass;
  localStorage.setItem('users',JSON.stringify(state.users));
  alert('Account created');
  logActivity('User signed up: '+email);
}

function login(){
  const email=document.getElementById('authEmail').value;
  const pass=document.getElementById('authPass').value;
  if(state.users[email]===pass){
    document.getElementById('authGate').style.display='none';
    document.getElementById('app').style.display='block';
    logActivity('User logged in: '+email);
  }else alert('Invalid credentials');
}

function exportJSON(){
  const blob=new Blob([JSON.stringify(state.logs,null,2)],{type:'application/json'});
  const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='logs.json';a.click();
}
function exportCSV(){
  const header='time,message\n';
  const rows=state.logs.map(l=>`${l.time},"${l.msg}"`).join("\n");
  const blob=new Blob([header+rows],{type:'text/csv'});
  const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='logs.csv';a.click();
}
function clearLogs(){state.logs=[];renderLogs();}

function openLegalModal(){document.getElementById('legalModal').classList.add('active');}
function closeLegalModal(){document.getElementById('legalModal').classList.remove('active');}

window.addEventListener('DOMContentLoaded',()=>{logActivity('Session started');renderLogs();});
</script>
</body>
</html>
